version: 0.2
env:
  parameter-store:
    CYPRESS_baseUrl: "aut-reg-autreg-93-etag-last-modif-test-apiUrl"

phases:
  install:
    commands:
      - echo "install cypress dependencies..."
      - apt-get update
      - npm install cypress --save-dev
      - apt-get install -y libgtk2.0-0 libnotify-dev libgconf-2-4 libnss3 libxss1 libasound2 xvfb
      - npm install --save-dev cypress-cucumber-preprocessor
  pre_build:
    commands:
      - echo "pre_build step"
  build:
    commands:
      - npx cypress run
  post_build:
    commands:
      - echo "post_build step"